<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - node_modules/ace-builds/src/ext-beautify.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet">
  <link href="../../assets/css/plato.css" rel="stylesheet">
  <link href="../../assets/css/plato-file.css" rel="stylesheet">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="http://github.com/es-analysis/plato">Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>node_modules/ace-builds/src/ext-beautify.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">44.51</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">329</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">70.50</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">3.71</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">define(&quot;ace/ext/beautify&quot;,[&quot;require&quot;,&quot;exports&quot;,&quot;module&quot;,&quot;ace/token_iterator&quot;], function(require, exports, module){// [WIP]
&quot;use strict&quot;;
var TokenIterator = require(&quot;../token_iterator&quot;).TokenIterator;
function is(token, type) {
    return token.type.lastIndexOf(type + &quot;.xml&quot;) &gt; -1;
}
exports.singletonTags = [&quot;area&quot;, &quot;base&quot;, &quot;br&quot;, &quot;col&quot;, &quot;command&quot;, &quot;embed&quot;, &quot;hr&quot;, &quot;html&quot;, &quot;img&quot;, &quot;input&quot;, &quot;keygen&quot;, &quot;link&quot;, &quot;meta&quot;, &quot;param&quot;, &quot;source&quot;, &quot;track&quot;, &quot;wbr&quot;];
exports.blockTags = [&quot;article&quot;, &quot;aside&quot;, &quot;blockquote&quot;, &quot;body&quot;, &quot;div&quot;, &quot;dl&quot;, &quot;fieldset&quot;, &quot;footer&quot;, &quot;form&quot;, &quot;head&quot;, &quot;header&quot;, &quot;html&quot;, &quot;nav&quot;, &quot;ol&quot;, &quot;p&quot;, &quot;script&quot;, &quot;section&quot;, &quot;style&quot;, &quot;table&quot;, &quot;tbody&quot;, &quot;tfoot&quot;, &quot;thead&quot;, &quot;ul&quot;];
exports.formatOptions = {
    lineBreaksAfterCommasInCurlyBlock: true
};
exports.beautify = function (session) {
    var iterator = new TokenIterator(session, 0, 0);
    var token = iterator.getCurrentToken();
    var tabString = session.getTabString();
    var singletonTags = exports.singletonTags;
    var blockTags = exports.blockTags;
    var formatOptions = exports.formatOptions || {};
    var nextToken;
    var breakBefore = false;
    var spaceBefore = false;
    var spaceAfter = false;
    var code = &quot;&quot;;
    var value = &quot;&quot;;
    var tagName = &quot;&quot;;
    var depth = 0;
    var lastDepth = 0;
    var lastIndent = 0;
    var indent = 0;
    var unindent = 0;
    var roundDepth = 0;
    var curlyDepth = 0;
    var row;
    var curRow = 0;
    var rowsToAdd = 0;
    var rowTokens = [];
    var abort = false;
    var i;
    var indentNextLine = false;
    var inTag = false;
    var inCSS = false;
    var inBlock = false;
    var levels = { 0: 0 };
    var parents = [];
    var caseBody = false;
    var trimNext = function () {
        if (nextToken &amp;&amp; nextToken.value &amp;&amp; nextToken.type !== &#039;string.regexp&#039;)
            nextToken.value = nextToken.value.replace(/^\s*/, &quot;&quot;);
    };
    var trimLine = function () {
        var end = code.length - 1;
        while (true) {
            if (end == 0)
                break;
            if (code[end] !== &quot; &quot;)
                break;
            end = end - 1;
        }
        code = code.slice(0, end + 1);
    };
    var trimCode = function () {
        code = code.trimRight();
        breakBefore = false;
    };
    while (token !== null) {
        curRow = iterator.getCurrentTokenRow();
        rowTokens = iterator.$rowTokens;
        nextToken = iterator.stepForward();
        if (typeof token !== &quot;undefined&quot;) {
            value = token.value;
            unindent = 0;
            inCSS = (tagName === &quot;style&quot; || session.$modeId === &quot;ace/mode/css&quot;);
            if (is(token, &quot;tag-open&quot;)) {
                inTag = true;
                if (nextToken)
                    inBlock = (blockTags.indexOf(nextToken.value) !== -1);
                if (value === &quot;&lt;/&quot;) {
                    if (inBlock &amp;&amp; !breakBefore &amp;&amp; rowsToAdd &lt; 1)
                        rowsToAdd++;
                    if (inCSS)
                        rowsToAdd = 1;
                    unindent = 1;
                    inBlock = false;
                }
            }
            else if (is(token, &quot;tag-close&quot;)) {
                inTag = false;
            }
            else if (is(token, &quot;comment.start&quot;)) {
                inBlock = true;
            }
            else if (is(token, &quot;comment.end&quot;)) {
                inBlock = false;
            }
            if (!inTag &amp;&amp; !rowsToAdd &amp;&amp; token.type === &quot;paren.rparen&quot; &amp;&amp; token.value.substr(0, 1) === &quot;}&quot;) {
                rowsToAdd++;
            }
            if (curRow !== row) {
                rowsToAdd = curRow;
                if (row)
                    rowsToAdd -= row;
            }
            if (rowsToAdd) {
                trimCode();
                for (; rowsToAdd &gt; 0; rowsToAdd--)
                    code += &quot;\n&quot;;
                breakBefore = true;
                if (!is(token, &quot;comment&quot;) &amp;&amp; !token.type.match(/^(comment|string)$/))
                    value = value.trimLeft();
            }
            if (value) {
                if (token.type === &quot;keyword&quot; &amp;&amp; value.match(/^(if|else|elseif|for|foreach|while|switch)$/)) {
                    parents[depth] = value;
                    trimNext();
                    spaceAfter = true;
                    if (value.match(/^(else|elseif)$/)) {
                        if (code.match(/\}[\s]*$/)) {
                            trimCode();
                            spaceBefore = true;
                        }
                    }
                }
                else if (token.type === &quot;paren.lparen&quot;) {
                    trimNext();
                    if (value.substr(-1) === &quot;{&quot;) {
                        spaceAfter = true;
                        indentNextLine = false;
                        if (!inTag)
                            rowsToAdd = 1;
                    }
                    if (value.substr(0, 1) === &quot;{&quot;) {
                        spaceBefore = true;
                        if (code.substr(-1) !== &#039;[&#039; &amp;&amp; code.trimRight().substr(-1) === &#039;[&#039;) {
                            trimCode();
                            spaceBefore = false;
                        }
                        else if (code.trimRight().substr(-1) === &#039;)&#039;) {
                            trimCode();
                        }
                        else {
                            trimLine();
                        }
                    }
                }
                else if (token.type === &quot;paren.rparen&quot;) {
                    unindent = 1;
                    if (value.substr(0, 1) === &quot;}&quot;) {
                        if (parents[depth - 1] === &#039;case&#039;)
                            unindent++;
                        if (code.trimRight().substr(-1) === &#039;{&#039;) {
                            trimCode();
                        }
                        else {
                            spaceBefore = true;
                            if (inCSS)
                                rowsToAdd += 2;
                        }
                    }
                    if (value.substr(0, 1) === &quot;]&quot;) {
                        if (code.substr(-1) !== &#039;}&#039; &amp;&amp; code.trimRight().substr(-1) === &#039;}&#039;) {
                            spaceBefore = false;
                            indent++;
                            trimCode();
                        }
                    }
                    if (value.substr(0, 1) === &quot;)&quot;) {
                        if (code.substr(-1) !== &#039;(&#039; &amp;&amp; code.trimRight().substr(-1) === &#039;(&#039;) {
                            spaceBefore = false;
                            indent++;
                            trimCode();
                        }
                    }
                    trimLine();
                }
                else if ((token.type === &quot;keyword.operator&quot; || token.type === &quot;keyword&quot;) &amp;&amp; value.match(/^(=|==|===|!=|!==|&amp;&amp;|\|\||and|or|xor|\+=|.=|&gt;|&gt;=|&lt;|&lt;=|=&gt;)$/)) {
                    trimCode();
                    trimNext();
                    spaceBefore = true;
                    spaceAfter = true;
                }
                else if (token.type === &quot;punctuation.operator&quot; &amp;&amp; value === &#039;;&#039;) {
                    trimCode();
                    trimNext();
                    spaceAfter = true;
                    if (inCSS)
                        rowsToAdd++;
                }
                else if (token.type === &quot;punctuation.operator&quot; &amp;&amp; value.match(/^(:|,)$/)) {
                    trimCode();
                    trimNext();
                    if (value.match(/^(,)$/) &amp;&amp; curlyDepth &gt; 0 &amp;&amp; roundDepth === 0 &amp;&amp; formatOptions.lineBreaksAfterCommasInCurlyBlock) {
                        rowsToAdd++;
                    }
                    else {
                        spaceAfter = true;
                        breakBefore = false;
                    }
                }
                else if (token.type === &quot;support.php_tag&quot; &amp;&amp; value === &quot;?&gt;&quot; &amp;&amp; !breakBefore) {
                    trimCode();
                    spaceBefore = true;
                }
                else if (is(token, &quot;attribute-name&quot;) &amp;&amp; code.substr(-1).match(/^\s$/)) {
                    spaceBefore = true;
                }
                else if (is(token, &quot;attribute-equals&quot;)) {
                    trimLine();
                    trimNext();
                }
                else if (is(token, &quot;tag-close&quot;)) {
                    trimLine();
                    if (value === &quot;/&gt;&quot;)
                        spaceBefore = true;
                }
                else if (token.type === &quot;keyword&quot; &amp;&amp; value.match(/^(case|default)$/)) {
                    if (caseBody)
                        unindent = 1;
                }
                if (breakBefore &amp;&amp; !(token.type.match(/^(comment)$/) &amp;&amp; !value.substr(0, 1).match(/^[/#]$/)) &amp;&amp; !(token.type.match(/^(string)$/) &amp;&amp; !value.substr(0, 1).match(/^[&#039;&quot;@]$/))) {
                    indent = lastIndent;
                    if (depth &gt; lastDepth) {
                        indent++;
                        for (i = depth; i &gt; lastDepth; i--)
                            levels[i] = indent;
                    }
                    else if (depth &lt; lastDepth)
                        indent = levels[depth];
                    lastDepth = depth;
                    lastIndent = indent;
                    if (unindent)
                        indent -= unindent;
                    if (indentNextLine &amp;&amp; !roundDepth) {
                        indent++;
                        indentNextLine = false;
                    }
                    for (i = 0; i &lt; indent; i++)
                        code += tabString;
                }
                if (token.type === &quot;keyword&quot; &amp;&amp; value.match(/^(case|default)$/)) {
                    if (caseBody === false) {
                        parents[depth] = value;
                        depth++;
                        caseBody = true;
                    }
                }
                else if (token.type === &quot;keyword&quot; &amp;&amp; value.match(/^(break)$/)) {
                    if (parents[depth - 1] &amp;&amp; parents[depth - 1].match(/^(case|default)$/)) {
                        depth--;
                        caseBody = false;
                    }
                }
                if (token.type === &quot;paren.lparen&quot;) {
                    roundDepth += (value.match(/\(/g) || []).length;
                    curlyDepth += (value.match(/\{/g) || []).length;
                    depth += value.length;
                }
                if (token.type === &quot;keyword&quot; &amp;&amp; value.match(/^(if|else|elseif|for|while)$/)) {
                    indentNextLine = true;
                    roundDepth = 0;
                }
                else if (!roundDepth &amp;&amp; value.trim() &amp;&amp; token.type !== &quot;comment&quot;)
                    indentNextLine = false;
                if (token.type === &quot;paren.rparen&quot;) {
                    roundDepth -= (value.match(/\)/g) || []).length;
                    curlyDepth -= (value.match(/\}/g) || []).length;
                    for (i = 0; i &lt; value.length; i++) {
                        depth--;
                        if (value.substr(i, 1) === &#039;}&#039; &amp;&amp; parents[depth] === &#039;case&#039;) {
                            depth--;
                        }
                    }
                }
                if (token.type == &quot;text&quot;)
                    value = value.replace(/\s+$/, &quot; &quot;);
                if (spaceBefore &amp;&amp; !breakBefore) {
                    trimLine();
                    if (code.substr(-1) !== &quot;\n&quot;)
                        code += &quot; &quot;;
                }
                code += value;
                if (spaceAfter)
                    code += &quot; &quot;;
                breakBefore = false;
                spaceBefore = false;
                spaceAfter = false;
                if ((is(token, &quot;tag-close&quot;) &amp;&amp; (inBlock || blockTags.indexOf(tagName) !== -1)) || (is(token, &quot;doctype&quot;) &amp;&amp; value === &quot;&gt;&quot;)) {
                    if (inBlock &amp;&amp; nextToken &amp;&amp; nextToken.value === &quot;&lt;/&quot;)
                        rowsToAdd = -1;
                    else
                        rowsToAdd = 1;
                }
                if (nextToken &amp;&amp; singletonTags.indexOf(nextToken.value) === -1) {
                    if (is(token, &quot;tag-open&quot;) &amp;&amp; value === &quot;&lt;/&quot;) {
                        depth--;
                    }
                    else if (is(token, &quot;tag-open&quot;) &amp;&amp; value === &quot;&lt;&quot;) {
                        depth++;
                    }
                    else if (is(token, &quot;tag-close&quot;) &amp;&amp; value === &quot;/&gt;&quot;) {
                        depth--;
                    }
                }
                if (is(token, &quot;tag-name&quot;)) {
                    tagName = value;
                }
                row = curRow;
            }
        }
        token = nextToken;
    }
    code = code.trim();
    session.doc.setValue(code);
};
exports.commands = [{
        name: &quot;beautify&quot;,
        description: &quot;Format selection (Beautify)&quot;,
        exec: function (editor) {
            exports.beautify(editor.session);
        },
        bindKey: &quot;Ctrl-Shift-B&quot;
    }];

});                (function() {
                    window.require([&quot;ace/ext/beautify&quot;], function(m) {
                        if (typeof module == &quot;object&quot; &amp;&amp; typeof exports == &quot;object&quot; &amp;&amp; module) {
                            module.exports = m;
                        }
                    });
                })();</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ cyclomatic }} <br>
    Length : {{ halstead.length }} <br>
    Difficulty : {{ halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
