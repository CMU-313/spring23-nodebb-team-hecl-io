<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - node_modules/@apidevtools/json-schema-ref-parser/lib/util/url.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet">
  <link href="../../assets/css/plato.css" rel="stylesheet">
  <link href="../../assets/css/plato-file.css" rel="stylesheet">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="http://github.com/es-analysis/plato">Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>node_modules/@apidevtools/json-schema-ref-parser/lib/util/url.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">67.41</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">257</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">38.93</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">1.20</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">&quot;use strict&quot;;

let isWindows = /^win/.test(process.platform),
    forwardSlashPattern = /\//g,
    protocolPattern = /^(\w{2,}):\/\//i,
    url = module.exports,
    jsonPointerSlash = /~1/g,
    jsonPointerTilde = /~0/g;

// RegExp patterns to URL-encode special characters in local filesystem paths
let urlEncodePatterns = [
  /\?/g, &quot;%3F&quot;,
  /\#/g, &quot;%23&quot;,
];

// RegExp patterns to URL-decode special characters for local filesystem paths
let urlDecodePatterns = [
  /\%23/g, &quot;#&quot;,
  /\%24/g, &quot;$&quot;,
  /\%26/g, &quot;&amp;&quot;,
  /\%2C/g, &quot;,&quot;,
  /\%40/g, &quot;@&quot;
];

exports.parse = require(&quot;url&quot;).parse;
exports.resolve = require(&quot;url&quot;).resolve;

/**
 * Returns the current working directory (in Node) or the current page URL (in browsers).
 *
 * @returns {string}
 */
exports.cwd = function cwd () {
  if (process.browser) {
    return location.href;
  }

  let path = process.cwd();

  let lastChar = path.slice(-1);
  if (lastChar === &quot;/&quot; || lastChar === &quot;\\&quot;) {
    return path;
  }
  else {
    return path + &quot;/&quot;;
  }
};

/**
 * Returns the protocol of the given URL, or `undefined` if it has no protocol.
 *
 * @param   {string} path
 * @returns {?string}
 */
exports.getProtocol = function getProtocol (path) {
  let match = protocolPattern.exec(path);
  if (match) {
    return match[1].toLowerCase();
  }
};

/**
 * Returns the lowercased file extension of the given URL,
 * or an empty string if it has no extension.
 *
 * @param   {string} path
 * @returns {string}
 */
exports.getExtension = function getExtension (path) {
  let lastDot = path.lastIndexOf(&quot;.&quot;);
  if (lastDot &gt;= 0) {
    return path.substr(lastDot).toLowerCase();
  }
  return &quot;&quot;;
};

/**
 * Returns the hash (URL fragment), of the given path.
 * If there is no hash, then the root hash (&quot;#&quot;) is returned.
 *
 * @param   {string} path
 * @returns {string}
 */
exports.getHash = function getHash (path) {
  let hashIndex = path.indexOf(&quot;#&quot;);
  if (hashIndex &gt;= 0) {
    return path.substr(hashIndex);
  }
  return &quot;#&quot;;
};

/**
 * Removes the hash (URL fragment), if any, from the given path.
 *
 * @param   {string} path
 * @returns {string}
 */
exports.stripHash = function stripHash (path) {
  let hashIndex = path.indexOf(&quot;#&quot;);
  if (hashIndex &gt;= 0) {
    path = path.substr(0, hashIndex);
  }
  return path;
};

/**
 * Determines whether the given path is an HTTP(S) URL.
 *
 * @param   {string} path
 * @returns {boolean}
 */
exports.isHttp = function isHttp (path) {
  let protocol = url.getProtocol(path);
  if (protocol === &quot;http&quot; || protocol === &quot;https&quot;) {
    return true;
  }
  else if (protocol === undefined) {
    // There is no protocol.  If we&#039;re running in a browser, then assume it&#039;s HTTP.
    return process.browser;
  }
  else {
    // It&#039;s some other protocol, such as &quot;ftp://&quot;, &quot;mongodb://&quot;, etc.
    return false;
  }
};

/**
 * Determines whether the given path is a filesystem path.
 * This includes &quot;file://&quot; URLs.
 *
 * @param   {string} path
 * @returns {boolean}
 */
exports.isFileSystemPath = function isFileSystemPath (path) {
  if (process.browser) {
    // We&#039;re running in a browser, so assume that all paths are URLs.
    // This way, even relative paths will be treated as URLs rather than as filesystem paths
    return false;
  }

  let protocol = url.getProtocol(path);
  return protocol === undefined || protocol === &quot;file&quot;;
};

/**
 * Converts a filesystem path to a properly-encoded URL.
 *
 * This is intended to handle situations where JSON Schema $Ref Parser is called
 * with a filesystem path that contains characters which are not allowed in URLs.
 *
 * @example
 * The following filesystem paths would be converted to the following URLs:
 *
 *    &lt;&quot;!@#$%^&amp;*+=?&#039;&gt;.json              ==&gt;   %3C%22!@%23$%25%5E&amp;*+=%3F\&#039;%3E.json
 *    C:\\My Documents\\File (1).json   ==&gt;   C:/My%20Documents/File%20(1).json
 *    file://Project #42/file.json      ==&gt;   file://Project%20%2342/file.json
 *
 * @param {string} path
 * @returns {string}
 */
exports.fromFileSystemPath = function fromFileSystemPath (path) {
  // Step 1: On Windows, replace backslashes with forward slashes,
  // rather than encoding them as &quot;%5C&quot;
  if (isWindows) {
    path = path.replace(/\\/g, &quot;/&quot;);
  }

  // Step 2: `encodeURI` will take care of MOST characters
  path = encodeURI(path);

  // Step 3: Manually encode characters that are not encoded by `encodeURI`.
  // This includes characters such as &quot;#&quot; and &quot;?&quot;, which have special meaning in URLs,
  // but are just normal characters in a filesystem path.
  for (let i = 0; i &lt; urlEncodePatterns.length; i += 2) {
    path = path.replace(urlEncodePatterns[i], urlEncodePatterns[i + 1]);
  }

  return path;
};

/**
 * Converts a URL to a local filesystem path.
 *
 * @param {string}  path
 * @param {boolean} [keepFileProtocol] - If true, then &quot;file://&quot; will NOT be stripped
 * @returns {string}
 */
exports.toFileSystemPath = function toFileSystemPath (path, keepFileProtocol) {
  // Step 1: `decodeURI` will decode characters such as Cyrillic characters, spaces, etc.
  path = decodeURI(path);

  // Step 2: Manually decode characters that are not decoded by `decodeURI`.
  // This includes characters such as &quot;#&quot; and &quot;?&quot;, which have special meaning in URLs,
  // but are just normal characters in a filesystem path.
  for (let i = 0; i &lt; urlDecodePatterns.length; i += 2) {
    path = path.replace(urlDecodePatterns[i], urlDecodePatterns[i + 1]);
  }

  // Step 3: If it&#039;s a &quot;file://&quot; URL, then format it consistently
  // or convert it to a local filesystem path
  let isFileUrl = path.substr(0, 7).toLowerCase() === &quot;file://&quot;;
  if (isFileUrl) {
    // Strip-off the protocol, and the initial &quot;/&quot;, if there is one
    path = path[7] === &quot;/&quot; ? path.substr(8) : path.substr(7);

    // insert a colon (&quot;:&quot;) after the drive letter on Windows
    if (isWindows &amp;&amp; path[1] === &quot;/&quot;) {
      path = path[0] + &quot;:&quot; + path.substr(1);
    }

    if (keepFileProtocol) {
      // Return the consistently-formatted &quot;file://&quot; URL
      path = &quot;file:///&quot; + path;
    }
    else {
      // Convert the &quot;file://&quot; URL to a local filesystem path.
      // On Windows, it will start with something like &quot;C:/&quot;.
      // On Posix, it will start with &quot;/&quot;
      isFileUrl = false;
      path = isWindows ? path : &quot;/&quot; + path;
    }
  }

  // Step 4: Normalize Windows paths (unless it&#039;s a &quot;file://&quot; URL)
  if (isWindows &amp;&amp; !isFileUrl) {
    // Replace forward slashes with backslashes
    path = path.replace(forwardSlashPattern, &quot;\\&quot;);

    // Capitalize the drive letter
    if (path.substr(1, 2) === &quot;:\\&quot;) {
      path = path[0].toUpperCase() + path.substr(1);
    }
  }

  return path;
};

/**
 * Converts a $ref pointer to a valid JSON Path.
 *
 * @param {string}  pointer
 * @returns {Array&lt;number | string&gt;}
 */
exports.safePointerToPath = function safePointerToPath (pointer) {
  if (pointer.length &lt;= 1 || pointer[0] !== &quot;#&quot; || pointer[1] !== &quot;/&quot;) {
    return [];
  }

  return pointer
    .slice(2)
    .split(&quot;/&quot;)
    .map((value) =&gt; {
      return decodeURIComponent(value)
        .replace(jsonPointerSlash, &quot;/&quot;)
        .replace(jsonPointerTilde, &quot;~&quot;);
    });
};</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ cyclomatic }} <br>
    Length : {{ halstead.length }} <br>
    Difficulty : {{ halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
