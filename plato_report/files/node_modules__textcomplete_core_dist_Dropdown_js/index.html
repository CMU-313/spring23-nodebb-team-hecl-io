<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - node_modules/@textcomplete/core/dist/Dropdown.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet">
  <link href="../../assets/css/plato.css" rel="stylesheet">
  <link href="../../assets/css/plato-file.css" rel="stylesheet">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="http://github.com/es-analysis/plato">Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>node_modules/@textcomplete/core/dist/Dropdown.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">67.40</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">291</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">79.63</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">3.40</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">&quot;use strict&quot;;
Object.defineProperty(exports, &quot;__esModule&quot;, { value: true });
exports.Dropdown = exports.DEFAULT_DROPDOWN_ITEM_ACTIVE_CLASS_NAME = exports.DEFAULT_DROPDOWN_ITEM_CLASS_NAME = exports.DEFAULT_DROPDOWN_CLASS_NAME = exports.DEFAULT_DROPDOWN_PLACEMENT = exports.DEFAULT_DROPDOWN_MAX_COUNT = void 0;
const eventemitter3_1 = require(&quot;eventemitter3&quot;);
const utils_1 = require(&quot;./utils&quot;);
// Default constants for Dropdown
exports.DEFAULT_DROPDOWN_MAX_COUNT = 10;
exports.DEFAULT_DROPDOWN_PLACEMENT = &quot;auto&quot;;
exports.DEFAULT_DROPDOWN_CLASS_NAME = &quot;dropdown-menu textcomplete-dropdown&quot;;
// Default constants for DropdownItem
exports.DEFAULT_DROPDOWN_ITEM_CLASS_NAME = &quot;textcomplete-item&quot;;
exports.DEFAULT_DROPDOWN_ITEM_ACTIVE_CLASS_NAME = `${exports.DEFAULT_DROPDOWN_ITEM_CLASS_NAME} active`;
class Dropdown extends eventemitter3_1.EventEmitter {
    constructor(el, option) {
        super();
        this.el = el;
        this.option = option;
        this.shown = false;
        this.items = [];
        this.activeIndex = null;
    }
    static create(option) {
        const ul = document.createElement(&quot;ul&quot;);
        ul.className = option.className || exports.DEFAULT_DROPDOWN_CLASS_NAME;
        Object.assign(ul.style, {
            display: &quot;none&quot;,
            position: &quot;absolute&quot;,
            zIndex: &quot;1000&quot;,
        }, option.style);
        const parent = option.parent || document.body;
        parent === null || parent === void 0 ? void 0 : parent.appendChild(ul);
        return new Dropdown(ul, option);
    }
    /**
     * Render the given search results. Previous results are cleared.
     *
     * @emits render
     * @emits rendered
     */
    render(searchResults, cursorOffset) {
        const event = (0, utils_1.createCustomEvent)(&quot;render&quot;, { cancelable: true });
        this.emit(&quot;render&quot;, event);
        if (event.defaultPrevented)
            return this;
        this.clear();
        if (searchResults.length === 0)
            return this.hide();
        this.items = searchResults
            .slice(0, this.option.maxCount || exports.DEFAULT_DROPDOWN_MAX_COUNT)
            .map((r, index) =&gt; { var _a; return new DropdownItem(this, index, r, ((_a = this.option) === null || _a === void 0 ? void 0 : _a.item) || {}); });
        this.setStrategyId(searchResults[0])
            .renderEdge(searchResults, &quot;header&quot;)
            .renderItems()
            .renderEdge(searchResults, &quot;footer&quot;)
            .show()
            .setOffset(cursorOffset)
            .activate(0);
        this.emit(&quot;rendered&quot;, (0, utils_1.createCustomEvent)(&quot;rendered&quot;));
        return this;
    }
    destroy() {
        var _a;
        this.clear();
        (_a = this.el.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(this.el);
        return this;
    }
    /**
     * Select the given item
     *
     * @emits select
     * @emits selected
     */
    select(item) {
        const detail = { searchResult: item.searchResult };
        const event = (0, utils_1.createCustomEvent)(&quot;select&quot;, { cancelable: true, detail });
        this.emit(&quot;select&quot;, event);
        if (event.defaultPrevented)
            return this;
        this.hide();
        this.emit(&quot;selected&quot;, (0, utils_1.createCustomEvent)(&quot;selected&quot;, { detail }));
        return this;
    }
    /**
     * Show the dropdown element
     *
     * @emits show
     * @emits shown
     */
    show() {
        if (!this.shown) {
            const event = (0, utils_1.createCustomEvent)(&quot;show&quot;, { cancelable: true });
            this.emit(&quot;show&quot;, event);
            if (event.defaultPrevented)
                return this;
            this.el.style.display = &quot;block&quot;;
            this.shown = true;
            this.emit(&quot;shown&quot;, (0, utils_1.createCustomEvent)(&quot;shown&quot;));
        }
        return this;
    }
    /**
     * Hide the dropdown element
     *
     * @emits hide
     * @emits hidden
     */
    hide() {
        if (this.shown) {
            const event = (0, utils_1.createCustomEvent)(&quot;hide&quot;, { cancelable: true });
            this.emit(&quot;hide&quot;, event);
            if (event.defaultPrevented)
                return this;
            this.el.style.display = &quot;none&quot;;
            this.shown = false;
            this.clear();
            this.emit(&quot;hidden&quot;, (0, utils_1.createCustomEvent)(&quot;hidden&quot;));
        }
        return this;
    }
    /** Clear search results */
    clear() {
        this.items.forEach((i) =&gt; i.destroy());
        this.items = [];
        this.el.innerHTML = &quot;&quot;;
        this.activeIndex = null;
        return this;
    }
    up(e) {
        return this.shown ? this.moveActiveItem(&quot;prev&quot;, e) : this;
    }
    down(e) {
        return this.shown ? this.moveActiveItem(&quot;next&quot;, e) : this;
    }
    moveActiveItem(direction, e) {
        if (this.activeIndex != null) {
            const activeIndex = direction === &quot;next&quot;
                ? this.getNextActiveIndex()
                : this.getPrevActiveIndex();
            if (activeIndex != null) {
                this.activate(activeIndex);
                e.preventDefault();
            }
        }
        return this;
    }
    activate(index) {
        if (this.activeIndex !== index) {
            if (this.activeIndex != null) {
                this.items[this.activeIndex].deactivate();
            }
            this.activeIndex = index;
            this.items[index].activate();
        }
        return this;
    }
    isShown() {
        return this.shown;
    }
    getActiveItem() {
        return this.activeIndex != null ? this.items[this.activeIndex] : null;
    }
    setOffset(cursorOffset) {
        const doc = document.documentElement;
        if (doc) {
            const elementWidth = this.el.offsetWidth;
            if (cursorOffset.left) {
                const browserWidth = this.option.dynamicWidth
                    ? doc.scrollWidth
                    : doc.clientWidth;
                if (cursorOffset.left + elementWidth &gt; browserWidth) {
                    cursorOffset.left = browserWidth - elementWidth;
                }
                this.el.style.left = `${cursorOffset.left}px`;
            }
            else if (cursorOffset.right) {
                if (cursorOffset.right - elementWidth &lt; 0) {
                    cursorOffset.right = 0;
                }
                this.el.style.right = `${cursorOffset.right}px`;
            }
            let forceTop = false;
            const placement = this.option.placement || exports.DEFAULT_DROPDOWN_PLACEMENT;
            if (placement === &quot;auto&quot;) {
                const dropdownHeight = this.items.length * cursorOffset.lineHeight;
                forceTop =
                    cursorOffset.clientTop != null &amp;&amp;
                        cursorOffset.clientTop + dropdownHeight &gt; doc.clientHeight;
            }
            if (placement === &quot;top&quot; || forceTop) {
                this.el.style.bottom = `${doc.clientHeight - cursorOffset.top + cursorOffset.lineHeight}px`;
                this.el.style.top = &quot;auto&quot;;
            }
            else {
                this.el.style.top = `${cursorOffset.top}px`;
                this.el.style.bottom = &quot;auto&quot;;
            }
        }
        return this;
    }
    getNextActiveIndex() {
        if (this.activeIndex == null)
            throw new Error();
        return this.activeIndex &lt; this.items.length - 1
            ? this.activeIndex + 1
            : this.option.rotate
                ? 0
                : null;
    }
    getPrevActiveIndex() {
        if (this.activeIndex == null)
            throw new Error();
        return this.activeIndex !== 0
            ? this.activeIndex - 1
            : this.option.rotate
                ? this.items.length - 1
                : null;
    }
    renderItems() {
        const fragment = document.createDocumentFragment();
        for (const item of this.items) {
            fragment.appendChild(item.el);
        }
        this.el.appendChild(fragment);
        return this;
    }
    setStrategyId(searchResult) {
        const id = searchResult.getStrategyId();
        if (id)
            this.el.dataset.strategy = id;
        return this;
    }
    renderEdge(searchResults, type) {
        const option = this.option[type];
        const li = document.createElement(&quot;li&quot;);
        li.className = `textcomplete-${type}`;
        li.innerHTML =
            typeof option === &quot;function&quot;
                ? option(searchResults.map((s) =&gt; s.data))
                : option || &quot;&quot;;
        this.el.appendChild(li);
        return this;
    }
}
exports.Dropdown = Dropdown;
class DropdownItem {
    constructor(dropdown, index, searchResult, props) {
        this.dropdown = dropdown;
        this.index = index;
        this.searchResult = searchResult;
        this.props = props;
        this.active = false;
        this.onClick = (e) =&gt; {
            e.preventDefault();
            this.dropdown.select(this);
        };
        this.className = this.props.className || exports.DEFAULT_DROPDOWN_ITEM_CLASS_NAME;
        this.activeClassName =
            this.props.activeClassName || exports.DEFAULT_DROPDOWN_ITEM_ACTIVE_CLASS_NAME;
        const li = document.createElement(&quot;li&quot;);
        li.className = this.active ? this.activeClassName : this.className;
        const span = document.createElement(&quot;span&quot;);
        span.tabIndex = -1;
        span.innerHTML = this.searchResult.render();
        li.appendChild(span);
        li.addEventListener(&quot;click&quot;, this.onClick);
        this.el = li;
    }
    destroy() {
        var _a;
        const li = this.el;
        (_a = li.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(li);
        li.removeEventListener(&quot;click&quot;, this.onClick, false);
        return this;
    }
    activate() {
        if (!this.active) {
            this.active = true;
            this.el.className = this.activeClassName;
            this.dropdown.el.scrollTop = this.el.offsetTop;
        }
        return this;
    }
    deactivate() {
        if (this.active) {
            this.active = false;
            this.el.className = this.className;
        }
        return this;
    }
}
//# sourceMappingURL=Dropdown.js.map</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ cyclomatic }} <br>
    Length : {{ halstead.length }} <br>
    Difficulty : {{ halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
